# Hermes (èµ«å°”å¢¨æ–¯)

> **åŸºäº Rclone çš„è½»é‡çº§äº‘ç«¯å¤‡ä»½è‡ªåŠ¨åŒ–ç®¡å®¶**

`Hermes` å–åè‡ªå¸Œè…Šç¥è¯ä¸­çš„ä¿¡ä½¿ã€‚å®ƒæ˜¯ä¸€å¥—é«˜æ•ˆçš„å¤‡ä»½å·¥å…·é›†ï¼Œæ—¨åœ¨é€šè¿‡ç®€å•çš„é…ç½®å®ç°å¤šé¡¹ç›®ã€å¤šè¿œç«¯çš„è‡ªåŠ¨åŒ–å¤‡ä»½ã€‚

## ğŸ“– æ¦‚è¿°

é¡¹ç›®ç”±ä¸¤ä¸ªæ ¸å¿ƒç»„ä»¶ç»„æˆï¼š

- **`hermes-backup` åå°å®ˆæŠ¤è¿›ç¨‹**ï¼šåŸºäº `config.yaml` é…ç½®æ–‡ä»¶ï¼Œå€ŸåŠ© `rclone` å®šæ—¶å®Œæˆäº‘ç«¯å¤‡ä»½ä»»åŠ¡ã€‚
- **`hermes` ç»ˆç«¯å‘½ä»¤è¡Œå·¥å…·**ï¼šæä¾›å¤‡ä»½é¡¹ç›®ç®¡ç†ã€é…ç½®æŸ¥çœ‹/ç¼–è¾‘ã€æœåŠ¡æ§åˆ¶åŠæ‰‹åŠ¨è§¦å‘å¤‡ä»½çš„èƒ½åŠ›ã€‚

## ğŸ“¦ å®‰è£…

1. **è·å–å¹¶è¿è¡Œè„šæœ¬**ï¼š

   ```bash
   curl -fsSL https://wcx0206.github.io/hermes/install.sh | bash
   ```

   å®‰è£…è„šæœ¬ä¼šå°†æœ€æ–°çš„ `hermes-backup` ä¸ `hermes` ä¸‹è½½åˆ° `~/.local/bin`ã€‚
2. **æ‰‹åŠ¨ä¸‹è½½**ï¼šä¹Ÿå¯ä»¥ä» GitHub Releases ä¸‹è½½å¯¹åº”å¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1. é…ç½®ç®¡ç† (Config)

ç”¨äºç®¡ç†åŸºç¡€è¿è¡Œç¯å¢ƒã€‚

- **å‚æ•°è¯´æ˜**ï¼š`--config` é»˜è®¤ä¸ºå¯æ‰§è¡Œæ–‡ä»¶åŒç›®å½•ä¸‹çš„ `config.yaml`ã€‚
- **æŸ¥çœ‹é…ç½®**ï¼š`hermes config show [--config path]`ã€‚
- **ç¼–è¾‘é…ç½®**ï¼š`hermes config edit [--config path]`ã€‚

### 2. é¡¹ç›®ç®¡ç† (Project)

ç®¡ç†å…·ä½“çš„å¤‡ä»½ä»»åŠ¡ã€‚

- **å‚æ•°è¯´æ˜**ï¼š`--config` é»˜è®¤é€»è¾‘åŒä¸Šã€‚
- **åˆ—è¡¨æŸ¥çœ‹**ï¼š`hermes project list` (æˆ– `ls`)ã€‚
- **å¢åˆ æ”¹æŸ¥**ï¼š
  - `hermes project add [--config path]`ï¼šæ·»åŠ æ–°å¤‡ä»½é¡¹ç›®ã€‚
  - `hermes project update <name> [--config path]`ï¼šæ›´æ–°ç°æœ‰é¡¹ç›®ã€‚
  - `hermes project delete <name> [--config path]` ï¼šåˆ é™¤æŒ‡å®šé¡¹ç›®ã€‚

### 3. åå°ç®¡ç† (Server)

æ§åˆ¶å®ˆæŠ¤è¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€ã€‚

- **å‚æ•°è¯´æ˜**ï¼š
  - `--binary`ï¼šé»˜è®¤ä¸º `hermes` æ‰€åœ¨ç›®å½•ä¸‹çš„ `hermes-backup`ã€‚
  - `--config`ï¼šé»˜è®¤é€»è¾‘åŒä¸Šã€‚
- **æ§åˆ¶å‘½ä»¤**ï¼š
  - `hermes server start [--config path] [--binary path]`ï¼šå¯åŠ¨åå°å®ˆæŠ¤è¿›ç¨‹ã€‚
  - `hermes server stop [--config path] [--binary path]`ï¼šåœæ­¢åå°æœåŠ¡ã€‚
  - `hermes server restart [--config path] [--binary path]`ï¼šé‡å¯åå°æœåŠ¡ã€‚

### 4. å¤‡ä»½è§¦å‘ (Backup)

æ‰‹åŠ¨å¼ºåˆ¶æ‰§è¡Œå¤‡ä»½ä»»åŠ¡ã€‚

- **æ‰‹åŠ¨è§¦å‘**ï¼š`hermes backup run --projects <name1,name2>`ã€‚
- **æ³¨æ„**ï¼šå¤šä¸ªé¡¹ç›®åç§°è¯·ä½¿ç”¨**è‹±æ–‡é€—å·**åˆ†éš”ã€‚

---

## ğŸ“„ é…ç½®æ–‡ä»¶ç¤ºä¾‹ (`config.yaml`)

```yaml
logging:
  path: /hermes/logs/service.log # è¿è¡Œæ—¥å¿—å­˜å‚¨ä½ç½®
  debug: true # æ˜¯å¦åœ¨ç»ˆç«¯åŒæ­¥æ‰“å°æ—¥å¿—

defaults:
  rclone_remote: aliyun # é»˜è®¤ rclone é…ç½®å
  bucket: racknerd-vps # é»˜è®¤æ¡¶åç§°
  cron: 0 1 * * * # é»˜è®¤æ‰§è¡Œå®šæ—¶
  mode: copy # é»˜è®¤åŒæ­¥æ¨¡å¼: copy/sync

projects:
  - name: vaultwarden # é¡¹ç›®åç§°
    mode: sync # è¯¥é¡¹ç›®çš„åŒæ­¥æ¨¡å¼
    source_paths: # éœ€è¦åŒæ­¥çš„æºè·¯å¾„åˆ—è¡¨
      - /opt/vaultwarden/data
    cron: 0 2 * * * # é¡¹ç›®ç‹¬ç«‹å®šæ—¶
    rclone_remotes: # è¿œç«¯é…ç½®
      - name: aliyun
        bucket: racknerd-vps
```

---

#
